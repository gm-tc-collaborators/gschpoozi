# Script Usage - When to Run Validation Scripts

## AVAILABLE SCRIPTS

Located in `.cursor/scripts/`:

| Script | Purpose | When to Run |
|--------|---------|-------------|
| `validate-config.sh` | Full validation suite | Before any commit |
| `validate-thermal.py` | Temperature limit check | When editing heater configs |
| `validate-movement.py` | Position limit check | When editing stepper configs |
| `validate-pins.sh` | Pin conflict detection | When adding/changing pins |

## AUTOMATIC TRIGGERS

### Run `validate-config.sh` BEFORE:
- Committing any `.cfg` file changes
- Suggesting a PR or merge
- Declaring work "complete" on config changes

### Run `validate-thermal.py` when editing:
- `[extruder]` sections
- `[heater_bed]` sections
- Any `max_temp` or `min_temp` parameters
- PID tuning values

### Run `validate-movement.py` when editing:
- `[stepper_x]`, `[stepper_y]`, `[stepper_z]` sections
- `position_max` or `position_min` parameters
- `homing_speed` parameters
- `[extruder]` max_extrude settings

### Run `validate-pins.sh` when:
- Adding new hardware sections
- Changing any `*_pin:` parameter
- Creating new sensor/fan/stepper configs

## HOW TO RUN

```bash
# Full validation (recommended)
bash .cursor/scripts/validate-config.sh path/to/config.cfg

# Individual checks
python3 .cursor/scripts/validate-thermal.py path/to/config.cfg
python3 .cursor/scripts/validate-movement.py path/to/config.cfg
bash .cursor/scripts/validate-pins.sh path/to/config.cfg
```

## WORKFLOW INTEGRATION

### When Writing New Config Files:
1. Write the config
2. Run `validate-config.sh` on it
3. Fix any errors
4. Only then suggest committing

### When Modifying Existing Configs:
1. Read the current file
2. Make changes
3. Run appropriate validator(s)
4. Report results to user
5. Only proceed if validation passes

### Example Workflow:
```
User: "Add a filament sensor on pin PA4"

Assistant actions:
1. Read existing config
2. Add [filament_switch_sensor] section
3. Run: bash .cursor/scripts/validate-pins.sh config.cfg
4. If passes: show changes to user
5. If fails: fix conflicts first
```

## VALIDATION IS MANDATORY

**NEVER skip validation for config changes.**

Even for "simple" changes:
- A typo can brick a printer
- A pin conflict can cause hardware damage
- Wrong limits can cause crashes

When in doubt, run the full `validate-config.sh`.

## REPORTING RESULTS

After running validation, report to user:

```
Validation Results:
- Syntax check: PASS
- Thermal safety: PASS
- Movement safety: PASS (1 warning)
- Pin conflicts: PASS

Warning: [stepper_x] homing_speed higher than recommended: 100mm/s

Proceed with commit? (yes/no)
```
