{
  "id": "btt-manta-m8p-v2",
  "name": "BTT Manta M8P v2.0",
  "manufacturer": "BigTreeTech",
  "mcu": "stm32h723xx",
  "flash_command": "make flash FLASH_DEVICE=/dev/serial/by-id/usb-Klipper_stm32h723xx_*",
  
  "motor_ports": {
    "MOTOR_0": {
      "label": "Driver 0 (typically X)",
      "step_pin": "PE6",
      "dir_pin": "PE5",
      "enable_pin": "PC14",
      "uart_pin": "PC13",
      "diag_pin": "PF0",
      "cs_pin": "PC13",
      "spi_bus": "spi4"
    },
    "MOTOR_1": {
      "label": "Driver 1 (typically Y)",
      "step_pin": "PE2",
      "dir_pin": "PE1",
      "enable_pin": "PE4",
      "uart_pin": "PE3",
      "diag_pin": "PF2",
      "cs_pin": "PE3",
      "spi_bus": "spi4"
    },
    "MOTOR_2": {
      "label": "Driver 2 (typically Z)",
      "step_pin": "PB8",
      "dir_pin": "PB7",
      "enable_pin": "PE0",
      "uart_pin": "PB9",
      "diag_pin": "PF4",
      "cs_pin": "PB9",
      "spi_bus": "spi4"
    },
    "MOTOR_3": {
      "label": "Driver 3 (typically Z1)",
      "step_pin": "PB4",
      "dir_pin": "PB3",
      "enable_pin": "PB6",
      "uart_pin": "PB5",
      "diag_pin": "PF3",
      "cs_pin": "PB5",
      "spi_bus": "spi4"
    },
    "MOTOR_4": {
      "label": "Driver 4 (typically Z2)",
      "step_pin": "PG13",
      "dir_pin": "PG12",
      "enable_pin": "PG15",
      "uart_pin": "PG14",
      "diag_pin": "PF1",
      "cs_pin": "PG14",
      "spi_bus": "spi4"
    },
    "MOTOR_5": {
      "label": "Driver 5 (typically E0)",
      "step_pin": "PG9",
      "dir_pin": "PD7",
      "enable_pin": "PG11",
      "uart_pin": "PG10",
      "diag_pin": "PC5",
      "cs_pin": "PG10",
      "spi_bus": "spi4"
    },
    "MOTOR_6": {
      "label": "Driver 6 (typically E1)",
      "step_pin": "PD4",
      "dir_pin": "PD3",
      "enable_pin": "PD6",
      "uart_pin": "PD5",
      "diag_pin": "PC4",
      "cs_pin": "PD5",
      "spi_bus": "spi4"
    },
    "MOTOR_7": {
      "label": "Driver 7 (expansion)",
      "step_pin": "PC7",
      "dir_pin": "PC8",
      "enable_pin": "PD2",
      "uart_pin": "PC6",
      "diag_pin": "PA8",
      "cs_pin": "PC6",
      "spi_bus": "spi4"
    }
  },

  "heater_ports": {
    "HB": {
      "label": "Heated Bed",
      "pin": "PA0",
      "max_current_amps": 10,
      "voltage": 24
    },
    "HE0": {
      "label": "Heater 0 (Hotend)",
      "pin": "PA1",
      "max_current_amps": 5,
      "voltage": 24
    },
    "HE1": {
      "label": "Heater 1",
      "pin": "PA3",
      "max_current_amps": 5,
      "voltage": 24
    },
    "HE2": {
      "label": "Heater 2",
      "pin": "PA5",
      "max_current_amps": 5,
      "voltage": 24
    }
  },

  "fan_ports": {
    "FAN0": {
      "label": "Fan 0 (Part Cooling)",
      "pin": "PF7",
      "pwm": true,
      "tachometer_pin": null,
      "voltage": "selectable"
    },
    "FAN1": {
      "label": "Fan 1 (Hotend)",
      "pin": "PF9",
      "pwm": true,
      "tachometer_pin": null,
      "voltage": "selectable"
    },
    "FAN2": {
      "label": "Fan 2",
      "pin": "PF6",
      "pwm": true,
      "tachometer_pin": null,
      "voltage": "selectable"
    },
    "FAN3": {
      "label": "Fan 3",
      "pin": "PF8",
      "pwm": true,
      "tachometer_pin": null,
      "voltage": "selectable"
    }
  },

  "thermistor_ports": {
    "TB": {
      "label": "Bed Thermistor",
      "pin": "PB1",
      "pullup": "4.7k"
    },
    "T0": {
      "label": "Thermistor 0 (Hotend)",
      "pin": "PB0",
      "pullup": "4.7k"
    },
    "T1": {
      "label": "Thermistor 1",
      "pin": "PC5",
      "pullup": "4.7k"
    },
    "T2": {
      "label": "Thermistor 2",
      "pin": "PC4",
      "pullup": "4.7k"
    }
  },

  "endstop_ports": {
    "STOP_0": {
      "label": "Endstop 0 (typically X)",
      "pin": "PF0"
    },
    "STOP_1": {
      "label": "Endstop 1 (typically Y)",
      "pin": "PF2"
    },
    "STOP_2": {
      "label": "Endstop 2 (typically Z)",
      "pin": "PF4"
    },
    "STOP_3": {
      "label": "Endstop 3",
      "pin": "PF3"
    },
    "STOP_4": {
      "label": "Endstop 4",
      "pin": "PF1"
    }
  },

  "probe_ports": {
    "PROBE": {
      "label": "Probe/BLTouch",
      "signal_pin": "PD13",
      "servo_pin": "PD12"
    }
  },

  "misc_ports": {
    "NEOPIXEL": {
      "label": "NeoPixel/RGB LED",
      "pin": "PD15"
    },
    "FIL_SENSOR": {
      "label": "Filament Sensor",
      "pin": "PC0"
    },
    "POWER_DET": {
      "label": "Power Detection",
      "pin": "PC3"
    },
    "PS_ON": {
      "label": "Power Supply Control",
      "pin": "PF5"
    }
  },

  "spi_config": {
    "spi4": {
      "mosi_pin": "PE14",
      "miso_pin": "PE13",
      "sck_pin": "PE12"
    }
  },

  "cb1_cm4_support": {
    "notes": "Integrated support for CB1/CM4 compute modules",
    "uart_host": "/dev/ttyAMA0"
  },

  "default_assignments": {
    "stepper_x": "MOTOR_0",
    "stepper_y": "MOTOR_1",
    "stepper_z": "MOTOR_2",
    "stepper_z1": "MOTOR_3",
    "stepper_z2": "MOTOR_4",
    "extruder": "MOTOR_5",
    "extruder1": "MOTOR_6",
    "heater_bed": "HB",
    "heater_extruder": "HE0",
    "thermistor_bed": "TB",
    "thermistor_extruder": "T0",
    "fan_part_cooling": "FAN0",
    "fan_hotend": "FAN1",
    "fan_controller": "FAN2",
    "endstop_x": "STOP_0",
    "endstop_y": "STOP_1",
    "endstop_z": "STOP_2"
  }
}

